{"ast":null,"code":"import _asyncToGenerator from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/regenerator/index.js\";import*as React from'react';import Button from'@mui/material/Button';import TextField from'@mui/material/TextField';import Dialog from'@mui/material/Dialog';import DialogActions from'@mui/material/DialogActions';import DialogContent from'@mui/material/DialogContent';import DialogTitle from'@mui/material/DialogTitle';import'./CommentDialog.css';import requests from'../../requests';import EditIcon from'@mui/icons-material/Edit';import ListItem from'@mui/material/ListItem';import ListItemAvatar from'@mui/material/ListItemAvatar';import ListItemText from'@mui/material/ListItemText';import Avatar from'@mui/material/Avatar';import AddIcon from'@mui/icons-material/Add';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function EditComment(props){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),comment=_React$useState4[0],setComment=_React$useState4[1];var handleClickOpen=function handleClickOpen(){setOpen(true);setComment('');};var handleClose=function handleClose(){setOpen(false);};var handleEdit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return requests.put(\"authors/\".concat(props.post_author,\"/posts/\").concat(props.post_id,\"/comments/\").concat(props.comment_id,\"/\"),{comment:comment},{headers:{Authorization:localStorage.getItem('access_token'),accept:'application/json'}},{withCredentials:true});case 3:response=_context.sent;_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 9:handleClose();case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function handleEdit(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleClickOpen,endIcon:/*#__PURE__*/_jsx(EditIcon,{}),children:\"Edit\"}),/*#__PURE__*/_jsxs(Dialog,{open:open,minWidth:\"800px\",maxWidth:\"800px\",hideBackdrop:true,onClose:handleClose,children:[/*#__PURE__*/_jsx(DialogTitle,{className:\"comment-dialog\",children:\"Edit Comment\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(TextField,{defaultValue:\"Normal\",autoFocus:true,margin:\"dense\",id:\"name\",label:\"Comment\",type:\"email\",fullWidth:true,variant:\"standard\",value:comment,onChange:function onChange(event){setComment(event.target.value);}})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleEdit,children:\"Update\"})]})]})]});}export function AddCommentListItem(props){var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),open=_React$useState6[0],setOpen=_React$useState6[1];var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),comment=_React$useState8[0],setComment=_React$useState8[1];var handleClickOpen=function handleClickOpen(){setOpen(true);setComment('');};var handleClose=function handleClose(){setOpen(false);};var handleSend=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,response_recipient;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return requests.post(\"authors/\".concat(props.post_author,\"/posts/\").concat(props.post_id,\"/comments/\"),{post_id:props.post_id,comment:comment,contentType:\"text/markdown\",author:props.current_author,type:\"comment\"},{headers:{Authorization:localStorage.getItem('access_token'),accept:'application/json'}},{withCredentials:true});case 3:response=_context2.sent;sendToSelf(response.data);// send to recipients inbox\n_context2.next=7;return requests.post(\"authors/\".concat(props.post_author,\"/inbox/\"),response.data,{headers:{Authorization:localStorage.getItem('access_token'),accept:'application/json'}},{withCredentials:true});case 7:response_recipient=_context2.sent;_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 13:handleClose();case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function handleSend(){return _ref2.apply(this,arguments);};}();var sendToSelf=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(my_item){var response_self;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return requests.post(\"authors/\".concat(props.current_author,\"/inbox/\"),my_item,{headers:{Authorization:localStorage.getItem('access_token'),accept:'application/json'}},{withCredentials:true});case 2:response_self=_context3.sent;case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function sendToSelf(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(ListItem,{autoFocus:true,button:true,onClick:function onClick(){return handleClickOpen();},children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{children:/*#__PURE__*/_jsx(AddIcon,{})})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Add Comment\"})]}),/*#__PURE__*/_jsxs(Dialog,{open:open,minWidth:\"800px\",maxWidth:\"800px\",hideBackdrop:true,onClose:handleClose,children:[/*#__PURE__*/_jsx(DialogTitle,{className:\"comment-dialog\",children:\"Add new comment\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(TextField,{defaultValue:\"Normal\",placeholder:\"Write a comment...\",autoFocus:true,margin:\"dense\",id:\"name\",label:\"Comment\",type:\"email\",fullWidth:true,variant:\"standard\",value:comment,onChange:function onChange(event){setComment(event.target.value);}})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSend,children:\"Send\"})]})]})]});}","map":{"version":3,"sources":["/Users/victorlieu/Desktop/Development/reactdeploy/frontend/src/components/Posts/AddComment.js"],"names":["React","Button","TextField","Dialog","DialogActions","DialogContent","DialogTitle","requests","EditIcon","ListItem","ListItemAvatar","ListItemText","Avatar","AddIcon","EditComment","props","useState","open","setOpen","comment","setComment","handleClickOpen","handleClose","handleEdit","put","post_author","post_id","comment_id","headers","Authorization","localStorage","getItem","accept","withCredentials","response","console","log","event","target","value","AddCommentListItem","handleSend","post","contentType","author","current_author","type","sendToSelf","data","response_recipient","my_item","response_self"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport './CommentDialog.css';\nimport requests from '../../requests';\nimport EditIcon from '@mui/icons-material/Edit';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemAvatar from '@mui/material/ListItemAvatar';\nimport ListItemText from '@mui/material/ListItemText';\nimport Avatar from '@mui/material/Avatar';\nimport AddIcon from '@mui/icons-material/Add';\n\nexport function EditComment(props) {\n  const [open, setOpen] = React.useState(false);\n  const [comment, setComment] = React.useState('');\n\n  const handleClickOpen = () => {\n    setOpen(true);\n    setComment('');\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleEdit = async () => {\n        // send PUT request to authors/{authorId}/posts/{postId}/comments/{commentId} with new comment\n        try {\n        const response = await requests.put(`authors/${props.post_author}/posts/${props.post_id}/comments/${props.comment_id}/`,\n            {\n            comment: comment\n            },\n            {headers: {\n                Authorization: localStorage.getItem('access_token'),\n                accept: 'application/json',\n            }\n            },\n            {withCredentials: true});\n    } catch(e) {\n        console.log(e)\n    }\n    handleClose();\n  }\n\n  return (\n    <div>\n      <Button variant=\"contained\" onClick={handleClickOpen} endIcon={<EditIcon />}>\n        Edit\n      </Button>\n      <Dialog open={open} minWidth=\"800px\" maxWidth=\"800px\" hideBackdrop={true} onClose={handleClose}>\n        <DialogTitle className=\"comment-dialog\">Edit Comment</DialogTitle>\n        <DialogContent>\n          <TextField\n            defaultValue=\"Normal\"\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Comment\"\n            type=\"email\"\n            fullWidth\n            variant=\"standard\"\n            value={comment}\n            onChange={(event) => {setComment(event.target.value)}}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={handleClose}>Cancel</Button>\n          <Button variant=\"contained\" onClick={handleEdit}>Update</Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n\nexport function AddCommentListItem(props) {\n    const [open, setOpen] = React.useState(false);\n    const [comment, setComment] = React.useState('');\n  \n    const handleClickOpen = () => {\n      setOpen(true);\n      setComment('');\n    };\n  \n    const handleClose = () => {\n      setOpen(false);\n    };\n  \n    const handleSend = async () => {\n        // send POST request to authors/{authorId}/posts/{postId}/comments/ with a comment\n        try {\n            const response = await requests.post(`authors/${props.post_author}/posts/${props.post_id}/comments/`,\n              {\n              post_id: props.post_id,\n              comment: comment,\n              contentType: \"text/markdown\",\n              author: props.current_author,\n              type: \"comment\"\n              },\n              {headers: {\n                  Authorization: localStorage.getItem('access_token'),\n                  accept: 'application/json',\n                }\n              },\n              {withCredentials: true});\n            sendToSelf(response.data);\n            // send to recipients inbox\n            const response_recipient = await requests.post(`authors/${props.post_author}/inbox/`,\n            response.data,\n            {headers: {\n              Authorization: localStorage.getItem('access_token'),\n              accept: 'application/json',\n            }\n            },\n          {withCredentials: true})\n        } catch(e) {\n          console.log(e)\n        }\n        handleClose();\n    }\n  \n    const sendToSelf = async (my_item) => {\n      const response_self = await requests.post(\n        `authors/${props.current_author}/inbox/`,\n        my_item,\n        {headers: {\n          Authorization: localStorage.getItem('access_token'),\n          accept: 'application/json',\n        }},\n        {withCredentials:true});\n    };\n  \n    return (\n      <div>\n        <ListItem autoFocus button onClick={() => handleClickOpen()}>\n          <ListItemAvatar>\n            <Avatar>\n              <AddIcon />\n            </Avatar>\n          </ListItemAvatar>\n          <ListItemText primary=\"Add Comment\" />\n        </ListItem>\n        <Dialog open={open} minWidth=\"800px\" maxWidth=\"800px\" hideBackdrop={true} onClose={handleClose}>\n        <DialogTitle className=\"comment-dialog\">Add new comment</DialogTitle>\n        <DialogContent>\n          <TextField\n            defaultValue=\"Normal\"\n            placeholder=\"Write a comment...\"\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Comment\"\n            type=\"email\"\n            fullWidth\n            variant=\"standard\"\n            value={comment}\n            onChange={(event) => {setComment(event.target.value)}}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Cancel</Button>\n          <Button onClick={handleSend}>Send</Button>\n        </DialogActions>\n      </Dialog>\n      </div>\n    );\n  }"]},"metadata":{},"sourceType":"module"}