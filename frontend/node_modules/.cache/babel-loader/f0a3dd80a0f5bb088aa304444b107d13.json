{"ast":null,"code":"import _asyncToGenerator from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React from'react';import TextField from'@mui/material/TextField';import Button from'@mui/material/Button';import Alert from'@mui/material/Alert';import Typography from'@mui/material/Typography';import requests from\"../../requests\";import Table from\"@mui/material/Table\";import TableBody from'@mui/material/TableBody';import TableCell from'@mui/material/TableCell';import TableHead from'@mui/material/TableHead';import TableRow from'@mui/material/TableRow';import'./profileScreen.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProfileScreen=/*#__PURE__*/function(_React$Component){_inherits(ProfileScreen,_React$Component);var _super=_createSuper(ProfileScreen);function ProfileScreen(props){var _this;_classCallCheck(this,ProfileScreen);_this=_super.call(this,props);_this.state={author:{},showSuccess:false};_this.getAuthorDetails=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return requests.get('get-user/',{headers:{Authorization:localStorage.getItem('access_token'),accept:'application/json'}});case 2:response=_context.sent;_this.setState({author:{id:response.data.id?response.data.id:'',url:response.data.url?response.data.url:'',host:response.data.host?response.data.host:'',displayName:response.data.displayName?response.data.displayName:'',github:response.data.github?response.data.github:'',profileImage:response.data.profileImage?response.data.profileImage:''}});case 4:case\"end\":return _context.stop();}}},_callee);}));_this.saveChangesPressed=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var updatesDict,response,allKeys,updatedKeys,i;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:updatesDict={\"id\":_this.state.author.id};if(document.getElementById('url-input').value){updatesDict[\"url\"]=document.getElementById('url-input').value;}if(document.getElementById('host-input').value){updatesDict[\"host\"]=document.getElementById('host-input').value;}if(document.getElementById('displayName-input').value){updatesDict[\"displayName\"]=document.getElementById('displayName-input').value;}if(document.getElementById('github-input').value){updatesDict[\"github\"]=document.getElementById('github-input').value;}if(document.getElementById('profileImage-input').value){updatesDict[\"profileImage\"]=document.getElementById('profileImage-input').value;}_context2.next=8;return requests.post('authors/'+_this.state.author.id+'/',updatesDict,{WithCredentials:true});case 8:response=_context2.sent;// Keep values that were not updated\nallKeys=Object.keys(_this.state.author);updatedKeys=Object.keys(updatesDict);for(i=0;i<allKeys.length;i++){if(!updatedKeys.includes(allKeys[i])){updatesDict[allKeys[i]]=_this.state.author[allKeys[i]];}}// Update state\n_this.setState({author:updatesDict,showSuccess:true});setTimeout(function(){_this.setState({showSuccess:false});},2000);case 14:case\"end\":return _context2.stop();}}},_callee2);}));_this.getAuthorDetails();return _this;}_createClass(ProfileScreen,[{key:\"createData\",value:function createData(field,value){return{field:field,value:value};}},{key:\"render\",value:function render(){var rows=[this.createData('Url:',this.state.author.url),this.createData('Host:',this.state.author.host),this.createData('Display Name:',this.state.author.displayName),this.createData('GitHub:',this.state.author.github),this.createData('Profile Image:',this.state.author.profileImage)];return/*#__PURE__*/_jsxs(\"div\",{className:\"ProfileScreen\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Profile\"}),/*#__PURE__*/_jsxs(\"span\",{id:\"my-profile\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"Profile Image\",src:this.state.author.profileImage}),/*#__PURE__*/_jsx(\"div\",{id:\"labels\",children:/*#__PURE__*/_jsx(Table,{sx:{minWidth:200},\"aria-label\":\"simple table\",children:/*#__PURE__*/_jsx(TableBody,{children:rows.map(function(row){return/*#__PURE__*/_jsxs(TableRow,{sx:{'&:last-child td, &:last-child th':{border:0}},children:[/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",children:row.field}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:row.value})]},row.field);})})})})]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Edit Profile\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"inputs\",children:[/*#__PURE__*/_jsx(TextField,{id:\"url-input\",label:\"New Url\",variant:\"filled\",defaultValue:\"\"}),/*#__PURE__*/_jsx(TextField,{id:\"host-input\",label:\"New Host\",variant:\"filled\",defaultValue:\"\"}),/*#__PURE__*/_jsx(TextField,{id:\"displayName-input\",label:\"New Display Name\",variant:\"filled\",defaultValue:\"\"}),/*#__PURE__*/_jsx(TextField,{id:\"github-input\",label:\"New GitHub\",variant:\"filled\",defaultValue:\"\"}),/*#__PURE__*/_jsx(TextField,{id:\"profileImage-input\",label:\"New ProfileImage\",variant:\"filled\",defaultValue:\"\"})]}),/*#__PURE__*/_jsx(Button,{onClick:this.saveChangesPressed,variant:\"contained\",children:\"Save Changes\"}),this.state.showSuccess&&/*#__PURE__*/_jsx(Alert,{severity:\"success\",children:\"Changes saved successfully\"})]});}}]);return ProfileScreen;}(React.Component);export default ProfileScreen;","map":{"version":3,"sources":["/Users/victorlieu/Desktop/Development/reactdeploy/frontend/src/components/AccountDetails/profileScreen.js"],"names":["React","TextField","Button","Alert","Typography","requests","Table","TableBody","TableCell","TableHead","TableRow","ProfileScreen","props","state","author","showSuccess","getAuthorDetails","get","headers","Authorization","localStorage","getItem","accept","response","setState","id","data","url","host","displayName","github","profileImage","saveChangesPressed","updatesDict","document","getElementById","value","post","WithCredentials","allKeys","Object","keys","updatedKeys","i","length","includes","setTimeout","field","rows","createData","minWidth","map","row","border","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport TextField from '@mui/material/TextField'\nimport Button from '@mui/material/Button'\nimport Alert from '@mui/material/Alert'\nimport Typography from '@mui/material/Typography'\nimport requests from \"../../requests\";\nimport Table from \"@mui/material/Table\"\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableHead from '@mui/material/TableHead';\nimport TableRow from '@mui/material/TableRow';\nimport './profileScreen.css'\n\nclass ProfileScreen extends React.Component {\n    constructor(props){\n        super(props);\n        this.getAuthorDetails();\n    }\n    state = {author: {}, showSuccess: false};\n\n    getAuthorDetails = async () => {\n        // Get the author details\n        const response = await requests.get('get-user/', {headers: {\n            Authorization: localStorage.getItem('access_token'),\n            accept: 'application/json',\n          }});\n        this.setState({author: {\n            id: response.data.id ? response.data.id : '',\n            url: response.data.url ? response.data.url : '',\n            host: response.data.host ? response.data.host : '',\n            displayName: response.data.displayName ? response.data.displayName : '',\n            github: response.data.github ? response.data.github : '',\n            profileImage: response.data.profileImage ? response.data.profileImage : ''\n        }});\n    }\n\n    saveChangesPressed = async () => {\n        var updatesDict = {\"id\": this.state.author.id}\n        if (document.getElementById('url-input').value){\n            updatesDict[\"url\"] = document.getElementById('url-input').value;\n        }\n        if (document.getElementById('host-input').value){\n            updatesDict[\"host\"] = document.getElementById('host-input').value;\n        }\n        if (document.getElementById('displayName-input').value){\n            updatesDict[\"displayName\"] = document.getElementById('displayName-input').value;\n        }\n        if (document.getElementById('github-input').value){\n            updatesDict[\"github\"] = document.getElementById('github-input').value;\n        }\n        if (document.getElementById('profileImage-input').value){\n            updatesDict[\"profileImage\"] = document.getElementById('profileImage-input').value;\n        }\n        const response = await requests.post('authors/' + this.state.author.id + '/', updatesDict, {WithCredentials: true})\n\n        // Keep values that were not updated\n        const allKeys = Object.keys(this.state.author);\n        const updatedKeys = Object.keys(updatesDict);\n        for (let i = 0; i < allKeys.length; i++){\n            if (!updatedKeys.includes(allKeys[i])){\n                updatesDict[allKeys[i]] = this.state.author[allKeys[i]];\n            }\n        }\n            \n        // Update state\n        this.setState({author: updatesDict, showSuccess: true});\n        setTimeout(() => {\n            this.setState({showSuccess: false});\n        }, 2000);\n    }\n\n    createData(field, value) {\n        return { field, value };\n      }\n\n    render(){\n        var rows = [\n            this.createData('Url:', this.state.author.url),\n            this.createData('Host:', this.state.author.host),\n            this.createData('Display Name:', this.state.author.displayName),\n            this.createData('GitHub:', this.state.author.github),\n            this.createData('Profile Image:', this.state.author.profileImage),\n        ]\n        return (\n            <div className='ProfileScreen'>\n                <h1>My Profile</h1>\n                <span id='my-profile'>\n                    <img alt=\"Profile Image\" src={this.state.author.profileImage}></img>\n                    <div id='labels'>\n                    <Table sx={{ minWidth: 200 }} aria-label=\"simple table\">\n                        <TableBody>\n                        {rows.map((row) => (\n                            <TableRow\n                            key={row.field}\n                            sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\n                            >\n                            <TableCell component=\"th\" scope=\"row\">\n                                {row.field}\n                            </TableCell>\n                            <TableCell align=\"left\">{row.value}</TableCell>\n                            </TableRow>\n                        ))}\n                        </TableBody>\n                    </Table>\n                    </div>\n                </span>\n                <h1>Edit Profile</h1>\n                <div id='inputs'>\n                    <TextField id=\"url-input\" label=\"New Url\" variant=\"filled\" defaultValue=\"\"/>\n                    <TextField id=\"host-input\" label=\"New Host\" variant=\"filled\" defaultValue=\"\"/>\n                    <TextField id=\"displayName-input\" label=\"New Display Name\" variant=\"filled\" defaultValue=\"\"/>\n                    <TextField id=\"github-input\" label=\"New GitHub\" variant=\"filled\" defaultValue=\"\"/>\n                    <TextField id=\"profileImage-input\" label=\"New ProfileImage\" variant=\"filled\" defaultValue=\"\"/>\n                </div>\n                <Button onClick={this.saveChangesPressed} variant=\"contained\">Save Changes</Button>\n                {this.state.showSuccess && <Alert severity=\"success\">\n                    Changes saved successfully\n                </Alert>}\n            </div>\n        )\n    }\n}\n\nexport default ProfileScreen"]},"metadata":{},"sourceType":"module"}