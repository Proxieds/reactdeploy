{"ast":null,"code":"import _asyncToGenerator from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from\"react\";import requests from\"../../requests\";import{Alert,Avatar,Button,ListItem,ListItemAvatar,ListItemText,ListItemSecondaryAction}from\"@mui/material\";import ClearIcon from'@mui/icons-material/Clear';// assuming props contains all the author attributes of the follower, and the id of the current user\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Follower(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var removeFollower=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return requests.delete(\"authors/\".concat(props.currentUserId,\"/followers/\").concat(props.id,\"/\"),{headers:{Authorization:localStorage.getItem('access_token'),accept:'application/json'}},{withCredentials:true});case 3:response=_context.sent;setMessage({message:\"Unfollowed.\",severity:\"success\"});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);setMessage({message:\"Failed to unfollow.\",severity:\"error\"});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function removeFollower(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(ListItem,{divider:true,children:[message.message&&/*#__PURE__*/_jsx(Alert,{severity:message.severity,children:message.message}),/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{src:props.profileImage})}),/*#__PURE__*/_jsx(ListItemText,{primary:props.displayName}),/*#__PURE__*/_jsx(ListItemSecondaryAction,{children:/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(ClearIcon,{}),onClick:removeFollower,children:\"Remove\"})})]});}","map":{"version":3,"sources":["/Users/victorlieu/Desktop/Development/reactdeploy/frontend/src/components/Followers/Follower.js"],"names":["React","useState","requests","Alert","Avatar","Button","ListItem","ListItemAvatar","ListItemText","ListItemSecondaryAction","ClearIcon","Follower","props","message","setMessage","removeFollower","delete","currentUserId","id","headers","Authorization","localStorage","getItem","accept","withCredentials","response","severity","profileImage","displayName"],"mappings":"mbAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CAEA,OAASC,KAAT,CACQC,MADR,CAEQC,MAFR,CAGQC,QAHR,CAIQC,cAJR,CAKQC,YALR,CAMQC,uBANR,KAOe,eAPf,CAQA,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,CAEA;wFACA,cAAe,SAASC,CAAAA,QAAT,CAAkBC,KAAlB,CAAyB,CACpC,cAA8BX,QAAQ,CAAC,EAAD,CAAtC,wCAAOY,OAAP,eAAgBC,UAAhB,eAEA,GAAMC,CAAAA,cAAc,0FAAG,sLAGMb,CAAAA,QAAQ,CAACc,MAAT,mBAA2BJ,KAAK,CAACK,aAAjC,uBAA4DL,KAAK,CAACM,EAAlE,MACvB,CAACC,OAAO,CAAE,CACJC,aAAa,CAAEC,YAAY,CAACC,OAAb,CAAqB,cAArB,CADX,CAEJC,MAAM,CAAE,kBAFJ,CAAV,CADuB,CAKvB,CAACC,eAAe,CAAE,IAAlB,CALuB,CAHN,QAGXC,QAHW,eASjBX,UAAU,CAAC,CAACD,OAAO,CAAE,aAAV,CAAyBa,QAAQ,CAAE,SAAnC,CAAD,CAAV,CATiB,+EAWjBZ,UAAU,CAAC,CAACD,OAAO,CAAE,qBAAV,CAAiCa,QAAQ,CAAE,OAA3C,CAAD,CAAV,CAXiB,oEAAH,kBAAdX,CAAAA,cAAc,0CAApB,CAcA,mBACE,MAAC,QAAD,EAAU,OAAO,KAAjB,WACGF,OAAO,CAACA,OAAR,eACD,KAAC,KAAD,EAAO,QAAQ,CAAEA,OAAO,CAACa,QAAzB,UACGb,OAAO,CAACA,OADX,EAFF,cAME,KAAC,cAAD,wBACE,KAAC,MAAD,EACA,GAAG,CAAED,KAAK,CAACe,YADX,EADF,EANF,cAWE,KAAC,YAAD,EACE,OAAO,CAAEf,KAAK,CAACgB,WADjB,EAXF,cAcE,KAAC,uBAAD,wBACE,KAAC,MAAD,EACE,SAAS,cAAE,KAAC,SAAD,IADb,CAEE,OAAO,CAAEb,cAFX,oBADF,EAdF,GADF,CAwBH","sourcesContent":["import React, {useState} from \"react\";\nimport requests from \"../../requests\";\n\nimport { Alert,\n        Avatar,\n        Button,\n        ListItem,\n        ListItemAvatar,\n        ListItemText,\n        ListItemSecondaryAction,\n        } from \"@mui/material\";\nimport ClearIcon from '@mui/icons-material/Clear'\n\n// assuming props contains all the author attributes of the follower, and the id of the current user\nexport default function Follower(props) {\n    const [message, setMessage] = useState({});\n\n    const removeFollower = async () => {\n        // send DELETE request to author_id/followers/follower_id\n        try {\n          const response = await requests.delete(`authors/${props.currentUserId}/followers/${props.id}/`,\n          {headers: {\n                Authorization: localStorage.getItem('access_token'),\n                accept: 'application/json',\n          }},\n          {withCredentials: true});\n          setMessage({message: \"Unfollowed.\", severity: \"success\"});\n        } catch {\n          setMessage({message: \"Failed to unfollow.\", severity: \"error\"});\n        }   \n    }\n    return (\n      <ListItem divider>\n        {message.message && (\n        <Alert severity={message.severity}>\n          {message.message}\n        </Alert>\n        )}\n        <ListItemAvatar>\n          <Avatar\n          src={props.profileImage}\n          />\n        </ListItemAvatar>\n        <ListItemText\n          primary={props.displayName}\n        />\n        <ListItemSecondaryAction>\n          <Button \n            startIcon={<ClearIcon />}\n            onClick={removeFollower}>\n              Remove\n          </Button>\n        </ListItemSecondaryAction>\n      </ListItem>\n    );\n}"]},"metadata":{},"sourceType":"module"}