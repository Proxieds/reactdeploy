{"ast":null,"code":"import _asyncToGenerator from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import requests from\"../../requests\";import{Alert,Avatar,Button,ListItem,ListItemAvatar,ListItemText,ListItemSecondaryAction}from\"@mui/material\";import ClearIcon from'@mui/icons-material/Clear';import CheckIcon from'@mui/icons-material/Check';// assuming props contains all the author attributes of the person who\n// sent the follow request, and the id of the current user\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function FollowRequest(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),accepted=_useState4[0],setAccepted=_useState4[1];var acceptFollowRequest=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// send PUT request to author_id/followers/follower_id\nconsole.log('clicked accept');_context.prev=1;_context.next=4;return requests.put(\"authors/\".concat(props.currentUserId,\"/followers/\").concat(props.id,\"/\"),{headers:{Authorization:localStorage.getItem('access_token'),accept:'application/json'}},{withCredentials:true});case 4:response=_context.sent;setMessage({message:\"Accepted follow request.\",severity:\"success\"});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);setMessage({message:\"Failed to accept follow request.\",severity:\"error\"});case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function acceptFollowRequest(){return _ref.apply(this,arguments);};}();var rejectFollowRequest=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// send DELETE request to author_id/followers/follower_id\nconsole.log('clicked reject');_context2.prev=1;_context2.next=4;return requests.delete(\"authors/\".concat(props.currentUserId,\"/followers/\").concat(props.id,\"/\"),{headers:{Authorization:localStorage.getItem('access_token'),accept:'application/json'}},{withCredentials:true});case 4:response=_context2.sent;setMessage({message:\"Rejected follow request.\",severity:\"success\"});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);setMessage({message:\"Failed to reject follow request.\",severity:\"error\"});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function rejectFollowRequest(){return _ref2.apply(this,arguments);};}();useEffect(function(){setAccepted(props.accepted);},[]);return/*#__PURE__*/_jsxs(ListItem,{children:[message.message&&/*#__PURE__*/_jsx(Alert,{severity:message.severity,children:message.message}),/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{src:props.profileImage})}),accepted?/*#__PURE__*/_jsx(ListItemText,{primary:\"You accepted \"+props.displayName+\"\\'s follow request\"}):/*#__PURE__*/_jsx(ListItemText,{primary:props.displayName+\" wants to follow you\"}),!accepted&&/*#__PURE__*/_jsxs(ListItemSecondaryAction,{children:[/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(CheckIcon,{}),onClick:acceptFollowRequest,children:\"Accept\"}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(ClearIcon,{}),onClick:rejectFollowRequest,children:\"Reject\"})]})]});}","map":{"version":3,"sources":["/Users/victorlieu/Desktop/Development/reactdeploy/frontend/src/components/Followers/FollowRequest.js"],"names":["React","useState","useEffect","requests","Alert","Avatar","Button","ListItem","ListItemAvatar","ListItemText","ListItemSecondaryAction","ClearIcon","CheckIcon","FollowRequest","props","message","setMessage","accepted","setAccepted","acceptFollowRequest","console","log","put","currentUserId","id","headers","Authorization","localStorage","getItem","accept","withCredentials","response","severity","rejectFollowRequest","delete","profileImage","displayName"],"mappings":"mbAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CAEA,OAASC,KAAT,CACQC,MADR,CAEQC,MAFR,CAGQC,QAHR,CAIQC,cAJR,CAKQC,YALR,CAMQC,uBANR,KAOe,eAPf,CAQA,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,CAEA;AACA;wFACA,cAAe,SAASC,CAAAA,aAAT,CAAuBC,KAAvB,CAA8B,CACzC,cAA8Bb,QAAQ,CAAC,EAAD,CAAtC,wCAAOc,OAAP,eAAgBC,UAAhB,eACA,eAAgCf,QAAQ,CAAC,KAAD,CAAxC,yCAAOgB,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,CAAAA,mBAAmB,0FAAG,gJACxB;AACAC,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAFwB,sCAIClB,CAAAA,QAAQ,CAACmB,GAAT,mBAAwBR,KAAK,CAACS,aAA9B,uBAAyDT,KAAK,CAACU,EAA/D,MACvB,CAACC,OAAO,CAAE,CACRC,aAAa,CAAEC,YAAY,CAACC,OAAb,CAAqB,cAArB,CADP,CAERC,MAAM,CAAE,kBAFA,CAAV,CADuB,CAKvB,CAACC,eAAe,CAAE,IAAlB,CALuB,CAJD,QAIhBC,QAJgB,eAUtBf,UAAU,CAAC,CAACD,OAAO,CAAE,0BAAV,CAAsCiB,QAAQ,CAAE,SAAhD,CAAD,CAAV,CAVsB,+EAYtBhB,UAAU,CAAC,CAACD,OAAO,CAAE,kCAAV,CAA8CiB,QAAQ,CAAE,OAAxD,CAAD,CAAV,CAZsB,oEAAH,kBAAnBb,CAAAA,mBAAmB,0CAAzB,CAiBA,GAAMc,CAAAA,mBAAmB,2FAAG,qJACxB;AACAb,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAFwB,wCAIClB,CAAAA,QAAQ,CAAC+B,MAAT,mBAA2BpB,KAAK,CAACS,aAAjC,uBAA4DT,KAAK,CAACU,EAAlE,MACvB,CAACC,OAAO,CAAE,CACRC,aAAa,CAAEC,YAAY,CAACC,OAAb,CAAqB,cAArB,CADP,CAERC,MAAM,CAAE,kBAFA,CAAV,CADuB,CAKvB,CAACC,eAAe,CAAE,IAAlB,CALuB,CAJD,QAIhBC,QAJgB,gBAUtBf,UAAU,CAAC,CAACD,OAAO,CAAE,0BAAV,CAAsCiB,QAAQ,CAAE,SAAhD,CAAD,CAAV,CAVsB,mFAYtBhB,UAAU,CAAC,CAACD,OAAO,CAAE,kCAAV,CAA8CiB,QAAQ,CAAE,OAAxD,CAAD,CAAV,CAZsB,sEAAH,kBAAnBC,CAAAA,mBAAmB,2CAAzB,CAeA/B,SAAS,CAAC,UAAM,CACdgB,WAAW,CAACJ,KAAK,CAACG,QAAP,CAAX,CACD,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACE,MAAC,QAAD,YACGF,OAAO,CAACA,OAAR,eACD,KAAC,KAAD,EAAO,QAAQ,CAAEA,OAAO,CAACiB,QAAzB,UACGjB,OAAO,CAACA,OADX,EAFF,cAME,KAAC,cAAD,wBACE,KAAC,MAAD,EACA,GAAG,CAAED,KAAK,CAACqB,YADX,EADF,EANF,CAWGlB,QAAQ,cAAI,KAAC,YAAD,EAAc,OAAO,CAAE,gBAAkBH,KAAK,CAACsB,WAAxB,CAAsC,oBAA7D,EAAJ,cACF,KAAC,YAAD,EAAc,OAAO,CAAEtB,KAAK,CAACsB,WAAN,CAAoB,sBAA3C,EAZT,CAcG,CAACnB,QAAD,eAAa,MAAC,uBAAD,yBACZ,KAAC,MAAD,EACE,SAAS,cAAE,KAAC,SAAD,IADb,CAEE,OAAO,CAAEE,mBAFX,oBADY,cAMZ,KAAC,MAAD,EACE,SAAS,cAAE,KAAC,SAAD,IADb,CAEE,OAAO,CAAEc,mBAFX,oBANY,GAdhB,GADF,CA6BH","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport requests from \"../../requests\";\n\nimport { Alert,\n        Avatar,\n        Button,\n        ListItem,\n        ListItemAvatar,\n        ListItemText,\n        ListItemSecondaryAction,\n        } from \"@mui/material\";\nimport ClearIcon from '@mui/icons-material/Clear'\nimport CheckIcon from '@mui/icons-material/Check'\n\n// assuming props contains all the author attributes of the person who\n// sent the follow request, and the id of the current user\nexport default function FollowRequest(props) {\n    const [message, setMessage] = useState({});\n    const [accepted, setAccepted] = useState(false);\n\n    const acceptFollowRequest = async () => {\n        // send PUT request to author_id/followers/follower_id\n        console.log('clicked accept');\n        try {\n          const response = await requests.put(`authors/${props.currentUserId}/followers/${props.id}/`,\n          {headers: {\n            Authorization: localStorage.getItem('access_token'),\n            accept: 'application/json',\n          }},\n          {withCredentials: true});\n          setMessage({message: \"Accepted follow request.\", severity: \"success\"});\n        } catch {\n          setMessage({message: \"Failed to accept follow request.\", severity: \"error\"});\n        }   \n    }\n\n\n    const rejectFollowRequest = async () => {\n        // send DELETE request to author_id/followers/follower_id\n        console.log('clicked reject')\n        try {\n          const response = await requests.delete(`authors/${props.currentUserId}/followers/${props.id}/`,\n          {headers: {\n            Authorization: localStorage.getItem('access_token'),\n            accept: 'application/json',\n          }},\n          {withCredentials: true});\n          setMessage({message: \"Rejected follow request.\", severity: \"success\"});\n        } catch {\n          setMessage({message: \"Failed to reject follow request.\", severity: \"error\"});\n        }   \n    }\n    useEffect(() => {\n      setAccepted(props.accepted);\n    }, [])\n\n    return (\n      <ListItem>\n        {message.message && (\n        <Alert severity={message.severity}>\n          {message.message}\n        </Alert>\n        )}\n        <ListItemAvatar>\n          <Avatar\n          src={props.profileImage}\n          />\n        </ListItemAvatar>\n        {accepted ? (<ListItemText primary={\"You accepted \" + props.displayName + \"\\'s follow request\"}/>)  \n            : (<ListItemText primary={props.displayName + \" wants to follow you\"}\n        />)}\n        {!accepted && <ListItemSecondaryAction>\n          <Button \n            startIcon={<CheckIcon />}\n            onClick={acceptFollowRequest}>\n              Accept\n          </Button>\n          <Button \n            startIcon={<ClearIcon />}\n            onClick={rejectFollowRequest}>\n              Reject\n          </Button>\n        </ListItemSecondaryAction>}\n      </ListItem>\n    );\n}"]},"metadata":{},"sourceType":"module"}