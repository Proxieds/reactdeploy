{"ast":null,"code":"var _jsxFileName = \"/Users/victorlieu/Desktop/Development/404Project/frontend/src/components/Inbox/Inbox.js\";\nimport React from \"react\";\nimport requests from \"../../requests\";\nimport { Alert, Button, List, Grid, Box, TextField, Stack, ListItemText } from \"@mui/material\";\nimport FollowRequest from \"../Followers/FollowRequest\";\nimport LikeNotification from \"./LikeNotification\";\nimport CommentNotification from \"./CommentNotification\";\nimport Post from \"./Post\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Inbox extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.initializeDetails = async () => {\n      try {\n        // Get the author details\n        const response = await requests.get('service/get-user/', {\n          headers: {\n            Authorization: localStorage.getItem('access_token'),\n            accept: 'application/json'\n          }\n        });\n        this.setState({\n          currentUser: {\n            id: response.data.id ? response.data.id : '',\n            url: response.data.url ? response.data.url : '',\n            host: response.data.host ? response.data.host : '',\n            displayName: response.data.displayName ? response.data.displayName : '',\n            github: response.data.github ? response.data.github : '',\n            profileImage: response.data.profileImage ? response.data.profileImage : ''\n          }\n        });\n        const response_inbox = await requests.get(`service/authors/${this.state.currentUser.id}/inbox/`, {\n          headers: {\n            Authorization: localStorage.getItem('access_token'),\n            accept: 'application/json'\n          }\n        }, {\n          withCredentials: true\n        });\n        this.setState({\n          inboxList: response_inbox.data.items\n        });\n        console.log(this.state.inboxList);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    this.clearInbox = async () => {\n      try {\n        const response_inbox = await requests.delete(`service/authors/${this.state.currentUser.id}/inbox/`, {\n          headers: {\n            Authorization: localStorage.getItem('access_token'),\n            accept: 'application/json'\n          }\n        }, {\n          withCredentials: true\n        });\n        this.setState({\n          inboxList: []\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    this.state = {\n      currentUser: {},\n      inboxList: []\n    };\n  }\n\n  componentDidMount() {\n    this.initializeDetails();\n  }\n\n  renderInboxItems() {\n    return this.state.inboxList.map(item => {\n      console.log('item', item);\n\n      if (item.type === 'post') {\n        return /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 8,\n          children: /*#__PURE__*/_jsxDEV(Post, {\n            author: item.author,\n            title: item.title,\n            contentType: item.contentType,\n            content: item.content,\n            description: item.description,\n            post: {\n              id: item.id\n            },\n            currentUser: this.state.currentUser\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this);\n      } else if (item.type === 'Follow') {\n        return /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 8,\n          children: /*#__PURE__*/_jsxDEV(FollowRequest, {\n            displayName: item.actor.displayName,\n            profileImage: item.actor.profileImage,\n            currentUserId: this.state.currentUser.id,\n            id: item.actor.id,\n            accepted: item.accepted\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this);\n      } else if (item.type === 'Like') {\n        return /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 8,\n          children: /*#__PURE__*/_jsxDEV(LikeNotification, {\n            summary: item.summary,\n            profileImage: item.author.profileImage,\n            object: item.object\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this);\n      } else if (item.type === 'comment') {\n        return /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 8,\n          children: /*#__PURE__*/_jsxDEV(CommentNotification, {\n            profileImage: item.author.profileImage,\n            displayName: item.author.displayName,\n            owned: item.author.id === this.state.currentUser.id,\n            id: item.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this);\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"inbox\",\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        p: 2,\n        justifyContent: \"center\",\n        alignItem: \"center\",\n        direction: \"column\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          startIcon: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 26\n          }, this),\n          onClick: this.clearInbox,\n          children: \"Clear inbox\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        justifyContent: \"center\",\n        alignItem: \"center\",\n        children: this.state.inboxList.length ? this.renderInboxItems() : /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Inbox is empty\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 70\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nexport default Inbox;","map":{"version":3,"sources":["/Users/victorlieu/Desktop/Development/404Project/frontend/src/components/Inbox/Inbox.js"],"names":["React","requests","Alert","Button","List","Grid","Box","TextField","Stack","ListItemText","FollowRequest","LikeNotification","CommentNotification","Post","DeleteIcon","Inbox","Component","constructor","props","initializeDetails","response","get","headers","Authorization","localStorage","getItem","accept","setState","currentUser","id","data","url","host","displayName","github","profileImage","response_inbox","state","withCredentials","inboxList","items","console","log","error","clearInbox","delete","componentDidMount","renderInboxItems","map","item","type","author","title","contentType","content","description","actor","accepted","summary","object","render","length"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport requests from \"../../requests\";\nimport { Alert, Button, List, Grid, Box, TextField, Stack, ListItemText } from \"@mui/material\";\nimport FollowRequest from \"../Followers/FollowRequest\";\nimport LikeNotification from \"./LikeNotification\";\nimport CommentNotification from \"./CommentNotification\";\nimport Post from \"./Post\";\nimport DeleteIcon from '@mui/icons-material/Delete';\n\n  \nclass Inbox extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n        currentUser: {},\n        inboxList: [],\n    }\n}\n\n  componentDidMount() {\n      this.initializeDetails();\n  }\n\n  initializeDetails = async () => {\n      try {\n          // Get the author details\n          const response = await requests.get('service/get-user/', {headers: {\n              Authorization: localStorage.getItem('access_token'),\n              accept: 'application/json',\n          }});\n          this.setState({ currentUser: {\n              id: response.data.id ? response.data.id : '',\n              url: response.data.url ? response.data.url : '',\n              host: response.data.host ? response.data.host : '',\n              displayName: response.data.displayName ? response.data.displayName : '',\n              github: response.data.github ? response.data.github : '',\n              profileImage: response.data.profileImage ? response.data.profileImage : ''\n          }});\n\n          const response_inbox = await requests.get(`service/authors/${this.state.currentUser.id}/inbox/`,\n            {headers: {\n              Authorization: localStorage.getItem('access_token'),\n              accept: 'application/json',\n              }},\n              {withCredentials:true})\n          this.setState({inboxList: response_inbox.data.items})\n          console.log(this.state.inboxList)\n\n      } catch(error) {\n          console.log(error)\n      }\n  }\n\n  clearInbox = async () => {\n    try {\n      const response_inbox = await requests.delete(`service/authors/${this.state.currentUser.id}/inbox/`,\n            {headers: {\n              Authorization: localStorage.getItem('access_token'),\n              accept: 'application/json',\n              }},\n              {withCredentials:true})\n      this.setState({inboxList: []})\n    } catch(error) {\n        console.log(error)\n    }\n  }\n\n  renderInboxItems() {\n    return this.state.inboxList.map((item) => {\n        console.log('item', item)\n        if (item.type === 'post') {\n          return (\n            <Grid item xs={8}>\n              <Post author= {item.author}\n              title={item.title}\n              contentType={item.contentType}\n              content= {item.content}\n              description= {item.description}\n              post= {{id: item.id}}\n              currentUser={this.state.currentUser}\n              />\n            </Grid>\n          );\n        } else if (item.type === 'Follow') {\n          return (\n            <Grid item xs={8}>\n            <FollowRequest\n                displayName={item.actor.displayName}\n                profileImage={item.actor.profileImage}\n                currentUserId={this.state.currentUser.id}\n                id={item.actor.id}\n                accepted={item.accepted}\n            />\n            </Grid>\n          );\n        } else if (item.type === 'Like') {\n          return (\n            <Grid item xs={8}>\n            <LikeNotification\n              summary={item.summary}\n              profileImage={item.author.profileImage}\n              object={item.object}\n            />\n            </Grid>\n          );\n        } else if (item.type === 'comment') {\n          return (\n          <Grid item xs={8}>\n            <CommentNotification\n              profileImage={item.author.profileImage}\n              displayName={item.author.displayName}\n              owned={item.author.id === this.state.currentUser.id}\n              id={item.id}\n            />\n            </Grid>);\n        }\n    });\n  }\n\n  render(){\n      return (\n          <div className=\"inbox\">\n            <Grid container p={2}\n            justifyContent=\"center\"\n            alignItem=\"center\"\n            direction=\"column\">\n              <Button \n              variant=\"outlined\"\n              startIcon={<DeleteIcon />}\n              onClick={this.clearInbox}>\n                Clear inbox\n              </Button>\n            </Grid>\n          <Grid container spacing={2} justifyContent=\"center\" alignItem=\"center\">\n            {this.state.inboxList.length ? this.renderInboxItems() : <h2>Inbox is empty</h2>}\n          </Grid>\n          </div>\n      )\n  }\n}\n\nexport default Inbox;\n"]},"metadata":{},"sourceType":"module"}