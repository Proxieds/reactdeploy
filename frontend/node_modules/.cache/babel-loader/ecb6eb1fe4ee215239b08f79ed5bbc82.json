{"ast":null,"code":"var _jsxFileName = \"/Users/victorlieu/Desktop/Development/404Project/frontend/src/components/Followers/FriendsPage.js\";\nimport React from \"react\";\nimport requests from \"../../requests\";\nimport { Alert, Button, List, Grid, Box, TextField } from \"@mui/material\";\nimport PersonAddIcon from '@mui/icons-material/PersonAdd';\nimport Follower from \"./Follower\";\nimport Following from \"./Following\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass FriendsPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.initializeDetails = async () => {\n      try {\n        // Get the author details\n        const response = await requests.get('get-user/', {\n          headers: {\n            Authorization: localStorage.getItem('access_token'),\n            accept: 'application/json'\n          }\n        });\n        this.setState({\n          currentUser: {\n            id: response.data.id ? response.data.id : '',\n            url: response.data.url ? response.data.url : '',\n            host: response.data.host ? response.data.host : '',\n            displayName: response.data.displayName ? response.data.displayName : '',\n            github: response.data.github ? response.data.github : '',\n            profileImage: response.data.profileImage ? response.data.profileImage : ''\n          }\n        });\n        const response_follower = await requests.get(`authors/${this.state.currentUser.id}/followers/`);\n        this.setState({\n          followerList: response_follower.data.items\n        });\n        const response_following = await requests.get(`authors/${this.state.currentUser.id}/following/`);\n        this.setState({\n          followingList: response_following.data.items\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    this.sendFollowRequest = async () => {\n      try {\n        const data = {\n          type: 'follow',\n          summary: `${this.state.currentUser.id} wants to follow ${this.state.addFollowerId}`,\n          object: `${this.state.addFollowerId}`\n        };\n        const response = await requests.post(`authors/${this.state.addFollowerId}/inbox/`, data, {\n          headers: {\n            Authorization: localStorage.getItem('access_token'),\n            accept: 'application/json'\n          }\n        }, {\n          withCredentials: true\n        });\n        this.setState({\n          addFollowerResult: {\n            message: \"Sent Follow Request\",\n            severity: 'success'\n          }\n        });\n      } catch (error) {\n        this.setState({\n          addFollowerResult: {\n            message: \"Failed to send Follow Request\",\n            severity: 'error'\n          }\n        });\n      }\n    };\n\n    this.setAddFollowerId = e => {\n      this.setState({\n        addFollowerId: e.target.value\n      });\n    };\n\n    this.state = {\n      currentUser: {},\n      followerList: [],\n      followingList: [],\n      addFollowerId: '',\n      addFollowerResult: {\n        message: '',\n        severity: ''\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.initializeDetails();\n  }\n\n  renderFollowers() {\n    return this.state.followerList.map(follower => {\n      return /*#__PURE__*/_jsxDEV(Follower, {\n        displayName: follower.displayName,\n        profileImage: follower.profileImage,\n        currentUserId: this.state.currentUser.id,\n        id: follower.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this);\n    });\n  }\n\n  renderFollowing() {\n    return this.state.followingList.map(follower => {\n      return /*#__PURE__*/_jsxDEV(Following, {\n        displayName: follower.displayName,\n        profileImage: follower.profileImage,\n        currentUserId: this.state.currentUser.id,\n        id: follower.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"friendsPage\",\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          flexDirection: 'row',\n          p: 2,\n          m: 2,\n          ml: 10,\n          mr: 10,\n          justifyContent: 'center'\n        },\n        children: [\"Send a Follow Request To:\", /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          placeholder: \"Enter author ID\",\n          id: \"outlined-basic\",\n          onChange: this.setAddFollowerId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          sx: {\n            ml: 2\n          },\n          startIcon: /*#__PURE__*/_jsxDEV(PersonAddIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 28\n          }, this),\n          onClick: this.sendFollowRequest,\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 17\n        }, this), this.state.addFollowerResult && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: this.state.addFollowerResult.severity,\n          children: this.state.addFollowerResult.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Followers\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(List, {\n            children: this.renderFollowers()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Following\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(List, {\n            children: this.renderFollowing()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default FriendsPage;","map":{"version":3,"sources":["/Users/victorlieu/Desktop/Development/404Project/frontend/src/components/Followers/FriendsPage.js"],"names":["React","requests","Alert","Button","List","Grid","Box","TextField","PersonAddIcon","Follower","Following","FriendsPage","Component","constructor","props","initializeDetails","response","get","headers","Authorization","localStorage","getItem","accept","setState","currentUser","id","data","url","host","displayName","github","profileImage","response_follower","state","followerList","items","response_following","followingList","error","console","log","sendFollowRequest","type","summary","addFollowerId","object","post","withCredentials","addFollowerResult","message","severity","setAddFollowerId","e","target","value","componentDidMount","renderFollowers","map","follower","renderFollowing","render","display","flexDirection","p","m","ml","mr","justifyContent"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport requests from \"../../requests\";\nimport { Alert, Button, List, Grid, Box, TextField } from \"@mui/material\";\nimport PersonAddIcon from '@mui/icons-material/PersonAdd';\nimport Follower from \"./Follower\";\nimport Following from \"./Following\";\n\n\nclass FriendsPage extends React.Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            currentUser: {},\n            followerList: [],\n            followingList: [],\n            addFollowerId: '',\n            addFollowerResult: {message:'', severity:''},\n        }\n    }\n\n    componentDidMount() {\n        this.initializeDetails();\n    }\n\n    initializeDetails = async () => {\n        try {\n            // Get the author details\n            const response = await requests.get('get-user/', {headers: {\n                Authorization: localStorage.getItem('access_token'),\n                accept: 'application/json',\n            }});\n            this.setState({ currentUser: {\n                id: response.data.id ? response.data.id : '',\n                url: response.data.url ? response.data.url : '',\n                host: response.data.host ? response.data.host : '',\n                displayName: response.data.displayName ? response.data.displayName : '',\n                github: response.data.github ? response.data.github : '',\n                profileImage: response.data.profileImage ? response.data.profileImage : ''\n            }});\n\n            const response_follower = await requests.get(`authors/${this.state.currentUser.id}/followers/`)\n            this.setState({followerList: response_follower.data.items})\n\n            const response_following = await requests.get(`authors/${this.state.currentUser.id}/following/`)\n            this.setState({followingList: response_following.data.items})\n        } catch(error) {\n            console.log(error)\n        }\n        \n    }\n\n    sendFollowRequest = async () => {\n        try {\n            const data = {\n                type: 'follow',\n                summary: `${this.state.currentUser.id} wants to follow ${this.state.addFollowerId}`,\n                object: `${this.state.addFollowerId}`\n            }\n            const response = await requests.post(`authors/${this.state.addFollowerId}/inbox/`,\n                data,\n                {headers: {\n                Authorization: localStorage.getItem('access_token'),\n                accept: 'application/json',\n                }},\n                {withCredentials:true})\n            this.setState({addFollowerResult: {message:\"Sent Follow Request\", severity:'success'}});\n        } catch(error) {\n            this.setState({addFollowerResult: {message:\"Failed to send Follow Request\", severity:'error'}});\n        }\n    }\n\n    setAddFollowerId = (e) => {\n        this.setState({addFollowerId: e.target.value});\n    }\n\n    renderFollowers() {\n        return this.state.followerList.map((follower) => {\n            return (\n                <Follower\n                    displayName={follower.displayName}\n                    profileImage={follower.profileImage}\n                    currentUserId={this.state.currentUser.id}\n                    id={follower.id}\n                />\n            );\n        });\n    }\n\n    renderFollowing() {\n        return this.state.followingList.map((follower) => {\n            return (\n                <Following\n                    displayName={follower.displayName}\n                    profileImage={follower.profileImage}\n                    currentUserId={this.state.currentUser.id}\n                    id={follower.id}\n                />\n            );\n        });\n    }\n\n    render(){\n        return (\n            <div className=\"friendsPage\">\n            <Box\n                sx={{ display: 'flex',\n                       flexDirection: 'row',\n                       p: 2,\n                       m: 2,\n                       ml: 10,\n                       mr: 10,\n                       justifyContent: 'center'\n                    }}>\n                Send a Follow Request To:\n                <TextField \n                    fullWidth\n                    placeholder=\"Enter author ID\" \n                    id=\"outlined-basic\"\n                    onChange={this.setAddFollowerId}/>\n                <Button \n                sx={{ml: 2}}\n                startIcon={<PersonAddIcon />}\n                onClick={this.sendFollowRequest}>\n                Send\n                </Button>\n                {this.state.addFollowerResult && (\n                <Alert severity={this.state.addFollowerResult.severity}>\n                {this.state.addFollowerResult.message}\n                </Alert>\n                )}\n            </Box>\n            <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                    <h2>Followers</h2>\n                    <List>\n                        {this.renderFollowers()}\n                    </List>\n                </Grid>\n                <Grid item xs={12} md={6}>\n                    <h2>Following</h2>\n                    <List>\n                        {this.renderFollowing()}\n                    </List>\n                </Grid>\n            </Grid>\n            </div>\n        )\n    }\n}\n\nexport default FriendsPage"]},"metadata":{},"sourceType":"module"}