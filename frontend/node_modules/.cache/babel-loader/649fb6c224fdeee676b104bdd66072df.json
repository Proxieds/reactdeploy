{"ast":null,"code":"import _asyncToGenerator from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import requests from\"../../requests\";import{Alert,Button,List,Grid,Box,TextField}from\"@mui/material\";import PersonAddIcon from'@mui/icons-material/PersonAdd';import Follower from\"./Follower\";import Following from\"./Following\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FriendsPage=/*#__PURE__*/function(_React$Component){_inherits(FriendsPage,_React$Component);var _super=_createSuper(FriendsPage);function FriendsPage(props){var _this;_classCallCheck(this,FriendsPage);_this=_super.call(this,props);_this.initializeDetails=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,response_follower,response_following;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return requests.get('get-user/',{headers:{Authorization:localStorage.getItem('access_token'),accept:'application/json'}});case 3:response=_context.sent;_this.setState({currentUser:{id:response.data.id?response.data.id:'',url:response.data.url?response.data.url:'',host:response.data.host?response.data.host:'',displayName:response.data.displayName?response.data.displayName:'',github:response.data.github?response.data.github:'',profileImage:response.data.profileImage?response.data.profileImage:''}});_context.next=7;return requests.get(\"authors/\".concat(_this.state.currentUser.id,\"/followers/\"));case 7:response_follower=_context.sent;_this.setState({followerList:response_follower.data.items});_context.next=11;return requests.get(\"authors/\".concat(_this.state.currentUser.id,\"/following/\"));case 11:response_following=_context.sent;_this.setState({followingList:response_following.data.items});_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}));_this.sendFollowRequest=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;data={type:'follow',summary:\"\".concat(_this.state.currentUser.id,\" wants to follow \").concat(_this.state.addFollowerId),object:\"\".concat(_this.state.addFollowerId)};_context2.next=4;return requests.post(\"authors/\".concat(_this.state.addFollowerId,\"/inbox/\"),data,{headers:{Authorization:localStorage.getItem('access_token'),accept:'application/json'}},{withCredentials:true});case 4:response=_context2.sent;_this.setState({addFollowerResult:{message:\"Sent Follow Request\",severity:'success'}});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);_this.setState({addFollowerResult:{message:\"Failed to send Follow Request\",severity:'error'}});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));_this.setAddFollowerId=function(e){_this.setState({addFollowerId:e.target.value});};_this.state={currentUser:{},followerList:[],followingList:[],addFollowerId:'',addFollowerResult:{message:'',severity:''}};return _this;}_createClass(FriendsPage,[{key:\"componentDidMount\",value:function componentDidMount(){this.initializeDetails();}},{key:\"renderFollowers\",value:function renderFollowers(){var _this2=this;return this.state.followerList.map(function(follower){return/*#__PURE__*/_jsx(Follower,{displayName:follower.displayName,profileImage:follower.profileImage,currentUserId:_this2.state.currentUser.id,id:follower.id});});}},{key:\"renderFollowing\",value:function renderFollowing(){var _this3=this;return this.state.followingList.map(function(follower){return/*#__PURE__*/_jsx(Following,{displayName:follower.displayName,profileImage:follower.profileImage,currentUserId:_this3.state.currentUser.id,id:follower.id});});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"friendsPage\",children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'row',p:2,m:2,ml:10,mr:10,justifyContent:'center'},children:[\"Send a Follow Request To:\",/*#__PURE__*/_jsx(TextField,{fullWidth:true,placeholder:\"Enter author ID\",id:\"outlined-basic\",onChange:this.setAddFollowerId}),/*#__PURE__*/_jsx(Button,{sx:{ml:2},startIcon:/*#__PURE__*/_jsx(PersonAddIcon,{}),onClick:this.sendFollowRequest,children:\"Send\"}),this.state.addFollowerResult&&/*#__PURE__*/_jsx(Alert,{severity:this.state.addFollowerResult.severity,children:this.state.addFollowerResult.message})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Followers\"}),/*#__PURE__*/_jsx(List,{children:this.renderFollowers()})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Following\"}),/*#__PURE__*/_jsx(List,{children:this.renderFollowing()})]})]})]});}}]);return FriendsPage;}(React.Component);export default FriendsPage;","map":{"version":3,"sources":["/Users/victorlieu/Desktop/Development/reactdeploy/frontend/src/components/Followers/FriendsPage.js"],"names":["React","requests","Alert","Button","List","Grid","Box","TextField","PersonAddIcon","Follower","Following","FriendsPage","props","initializeDetails","get","headers","Authorization","localStorage","getItem","accept","response","setState","currentUser","id","data","url","host","displayName","github","profileImage","state","response_follower","followerList","items","response_following","followingList","console","log","sendFollowRequest","type","summary","addFollowerId","object","post","withCredentials","addFollowerResult","message","severity","setAddFollowerId","e","target","value","map","follower","display","flexDirection","p","m","ml","mr","justifyContent","renderFollowers","renderFollowing","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport requests from \"../../requests\";\nimport { Alert, Button, List, Grid, Box, TextField } from \"@mui/material\";\nimport PersonAddIcon from '@mui/icons-material/PersonAdd';\nimport Follower from \"./Follower\";\nimport Following from \"./Following\";\n\n\nclass FriendsPage extends React.Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            currentUser: {},\n            followerList: [],\n            followingList: [],\n            addFollowerId: '',\n            addFollowerResult: {message:'', severity:''},\n        }\n    }\n\n    componentDidMount() {\n        this.initializeDetails();\n    }\n\n    initializeDetails = async () => {\n        try {\n            // Get the author details\n            const response = await requests.get('get-user/', {headers: {\n                Authorization: localStorage.getItem('access_token'),\n                accept: 'application/json',\n            }});\n            this.setState({ currentUser: {\n                id: response.data.id ? response.data.id : '',\n                url: response.data.url ? response.data.url : '',\n                host: response.data.host ? response.data.host : '',\n                displayName: response.data.displayName ? response.data.displayName : '',\n                github: response.data.github ? response.data.github : '',\n                profileImage: response.data.profileImage ? response.data.profileImage : ''\n            }});\n\n            const response_follower = await requests.get(`authors/${this.state.currentUser.id}/followers/`)\n            this.setState({followerList: response_follower.data.items})\n\n            const response_following = await requests.get(`authors/${this.state.currentUser.id}/following/`)\n            this.setState({followingList: response_following.data.items})\n        } catch(error) {\n            console.log(error)\n        }\n        \n    }\n\n    sendFollowRequest = async () => {\n        try {\n            const data = {\n                type: 'follow',\n                summary: `${this.state.currentUser.id} wants to follow ${this.state.addFollowerId}`,\n                object: `${this.state.addFollowerId}`\n            }\n            const response = await requests.post(`authors/${this.state.addFollowerId}/inbox/`,\n                data,\n                {headers: {\n                Authorization: localStorage.getItem('access_token'),\n                accept: 'application/json',\n                }},\n                {withCredentials:true})\n            this.setState({addFollowerResult: {message:\"Sent Follow Request\", severity:'success'}});\n        } catch(error) {\n            this.setState({addFollowerResult: {message:\"Failed to send Follow Request\", severity:'error'}});\n        }\n    }\n\n    setAddFollowerId = (e) => {\n        this.setState({addFollowerId: e.target.value});\n    }\n\n    renderFollowers() {\n        return this.state.followerList.map((follower) => {\n            return (\n                <Follower\n                    displayName={follower.displayName}\n                    profileImage={follower.profileImage}\n                    currentUserId={this.state.currentUser.id}\n                    id={follower.id}\n                />\n            );\n        });\n    }\n\n    renderFollowing() {\n        return this.state.followingList.map((follower) => {\n            return (\n                <Following\n                    displayName={follower.displayName}\n                    profileImage={follower.profileImage}\n                    currentUserId={this.state.currentUser.id}\n                    id={follower.id}\n                />\n            );\n        });\n    }\n\n    render(){\n        return (\n            <div className=\"friendsPage\">\n            <Box\n                sx={{ display: 'flex',\n                       flexDirection: 'row',\n                       p: 2,\n                       m: 2,\n                       ml: 10,\n                       mr: 10,\n                       justifyContent: 'center'\n                    }}>\n                Send a Follow Request To:\n                <TextField \n                    fullWidth\n                    placeholder=\"Enter author ID\" \n                    id=\"outlined-basic\"\n                    onChange={this.setAddFollowerId}/>\n                <Button \n                sx={{ml: 2}}\n                startIcon={<PersonAddIcon />}\n                onClick={this.sendFollowRequest}>\n                Send\n                </Button>\n                {this.state.addFollowerResult && (\n                <Alert severity={this.state.addFollowerResult.severity}>\n                {this.state.addFollowerResult.message}\n                </Alert>\n                )}\n            </Box>\n            <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                    <h2>Followers</h2>\n                    <List>\n                        {this.renderFollowers()}\n                    </List>\n                </Grid>\n                <Grid item xs={12} md={6}>\n                    <h2>Following</h2>\n                    <List>\n                        {this.renderFollowing()}\n                    </List>\n                </Grid>\n            </Grid>\n            </div>\n        )\n    }\n}\n\nexport default FriendsPage"]},"metadata":{},"sourceType":"module"}