{"ast":null,"code":"import _defineProperty from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _asyncToGenerator from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/Users/victorlieu/Desktop/Development/reactdeploy/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,Component}from\"react\";// import './App.css';\nimport{Button,TextField,Alert,AlertTitle}from\"@mui/material\";import\"../../styles/login-register.css\";import requests from\"../../requests\";import ProfileScreen from\"../AccountDetails/profileScreen\";import{useHstory,Redirect,NavLink}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={username:\"\",password:\"\",successful_login:false,error_login:false,error_messages:\"\"};_this.handleLogin=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!_this.validateLogin()){_context.next=14;break;}_context.prev=1;_context.next=4;return requests.post(\"login/\",{username:_this.state.username,password:_this.state.password},{WithCredentials:true});case 4:response=_context.sent;localStorage.setItem('access_token',response.data);requests.defaults.headers['Authorization']=localStorage.getItem('access_token');_this.setState({successful_login:true});_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);_this.setState({error_login:true});_this.setState({error_messages:\"Username or password was incorrect\"});case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return _this;}_createClass(Login,[{key:\"validateLogin\",value:function validateLogin(){if(!this.state.username){this.setState({error_login:true});this.setState({error_messages:\"Username is empty\"});return false;}if(!this.state.password){this.setState({error_login:true});this.setState({error_messages:\"Password is Empty\"});return false;}return true;}},{key:\"render\",value:function render(){var _this2=this,_jsx2;return/*#__PURE__*/_jsx(\"body\",{className:\"background\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[this.state.error_login&&/*#__PURE__*/_jsx(Alert,{className:\"alert\",severity:\"error\",children:/*#__PURE__*/_jsx(AlertTitle,{children:/*#__PURE__*/_jsx(\"strong\",{children:this.state.error_messages})})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Social Distributions\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Please Log in to Continue\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-wrapper\",children:[/*#__PURE__*/_jsx(TextField,{className:\"text-input\",size:\"small\",type:\"text\",label:\"Username\",value:this.state.username,onChange:function onChange(_ref2){var target=_ref2.target;return _this2.setState({username:target.value});}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TextField,(_jsx2={className:\"text-input\",size:\"small\",type:\"text\",label:\"Password\"},_defineProperty(_jsx2,\"type\",\"password\"),_defineProperty(_jsx2,\"value\",this.state.password),_defineProperty(_jsx2,\"onChange\",function onChange(_ref3){var target=_ref3.target;return _this2.setState({password:target.value});}),_jsx2)),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{disabled:this.state.loginBtnDisabled,variant:\"contained\",onClick:this.handleLogin,ref:function ref(node){return _this2.btn=node;},children:\"Login\"}),this.state.successful_login&&/*#__PURE__*/_jsx(Redirect,{to:\"/inbox\"})]}),/*#__PURE__*/_jsx(NavLink,{style:{textDecoration:'none',position:'relative',top:'20px'},to:\"/register\",children:\"Don't have an account? Sign Up\"})]})});}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/Users/victorlieu/Desktop/Development/reactdeploy/frontend/src/components/LoginRegister/login.js"],"names":["React","useEffect","Component","Button","TextField","Alert","AlertTitle","requests","ProfileScreen","useHstory","Redirect","NavLink","Login","state","username","password","successful_login","error_login","error_messages","handleLogin","validateLogin","post","WithCredentials","response","localStorage","setItem","data","defaults","headers","getItem","setState","target","value","loginBtnDisabled","node","btn","textDecoration","position","top"],"mappings":"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","sourcesContent":["import React, { useEffect, Component } from \"react\";\n// import './App.css';\nimport {\n    Button,\n    TextField,\n    Alert,\n    AlertTitle\n  } from \"@mui/material\";\nimport \"../../styles/login-register.css\";\nimport requests from \"../../requests\";\nimport ProfileScreen from \"../AccountDetails/profileScreen\";\nimport {useHstory, Redirect, NavLink } from \"react-router-dom\";\n  \nclass Login extends Component {\n    state = {\n          username: \"\",\n          password: \"\",\n          successful_login: false,\n          error_login: false,\n          error_messages: \"\"\n      }\n\n    validateLogin() {\n        if (!this.state.username) {\n            this.setState({error_login: true})\n            this.setState({error_messages: \"Username is empty\"})\n            return false\n        }\n        if (!this.state.password) {\n            this.setState({error_login: true})\n            this.setState({error_messages: \"Password is Empty\"})\n            return false\n        }\n        return true;\n    }\n    handleLogin = async () => {\n        if (this.validateLogin()) {\n            try {\n                const response = await requests.post(`login/`, {\n                    username: this.state.username,\n                    password: this.state.password\n                }, {WithCredentials: true});\n                localStorage.setItem('access_token', response.data);\n                requests.defaults.headers['Authorization'] = localStorage.getItem('access_token');\n                this.setState({successful_login: true})\n            }\n            catch {\n                this.setState({error_login: true})\n                this.setState({error_messages: \"Username or password was incorrect\"})\n            }\n        }\n    }\n\n  render() {\n      return (\n          <body className=\"background\">\n          <div className=\"login-form\">\n          {this.state.error_login&&<Alert className=\"alert\"  severity=\"error\">\n                <AlertTitle><strong>{this.state.error_messages}</strong></AlertTitle>\n            </Alert>}\n            <h1>\n                Social Distributions\n            </h1>\n            <h3>\n                Please Log in to Continue\n            </h3>\n            <div className=\"login-wrapper\">\n            <TextField\n                className=\"text-input\"\n                size=\"small\"\n                type=\"text\"\n                label=\"Username\"\n                value={this.state.username}\n                onChange={({ target }) =>\n                this.setState({\n                username: target.value\n                })\n            }\n            />\n            <br/>\n            <TextField\n                className=\"text-input\"\n                size=\"small\"\n                type=\"text\"\n                label=\"Password\"\n                type=\"password\"\n                value={this.state.password}\n                onChange={({ target }) =>\n                    this.setState({\n                    password: target.value\n                    })\n                }\n            />\n            <br/>\n            <Button\n                disabled={this.state.loginBtnDisabled}\n                variant=\"contained\"\n                onClick={this.handleLogin}\n                ref={node => (this.btn = node)}>\n              Login\n            </Button>\n            {this.state.successful_login && <Redirect to=\"/inbox\" />}\n            </div>\n            <NavLink style={{ textDecoration: 'none', position: 'relative', top: '20px' }} to=\"/register\">Don't have an account? Sign Up</NavLink>\n          </div>\n          </body>\n        );\n    }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}